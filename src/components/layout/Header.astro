---
const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/beta-test', label: 'Attendees' },
  { href: '/partner-up', label: 'Organizers' },
  { href: '/manifesto', label: 'Mission' },
]

const normalizePath = (path: string) => {
  const trimmed = path.replace(/\/+$/, '')
  return trimmed === '' ? '/' : trimmed
}

const currentPath = normalizePath(Astro.url.pathname)
---

<header>
  <nav class="nav">
    <div class="nav-pill card-depth" role="menubar">
      {navLinks.map(({ href, label }) => (
        <a
          href={href}
          class={`nav-link${normalizePath(href) === currentPath ? ' is-active' : ''}`}
          role="menuitem"
        >
          {label}
        </a>
      ))}
    </div>

    <a href="/beta-test" class="beta-cta card-depth">
      <span class="beta-label">Join Beta</span>
    </a>
  </nav>
</header>
<style>
  header {
    position: fixed;
    top: 24px;
    left: 8px;
    right: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }

  .nav {
    display: flex;
    justify-content: stretch;
    gap: 8px;
  }

  .nav-pill {
    display: flex;
    padding: 2px;
    justify-content: center;
    align-items: center;
    border-radius: 9px;
    border: 1px solid var(--colors-indigo-40, #4D00FF);
    background: var(--colors-ink-95, #EDE8FE);

    .nav-link {
      overflow: hidden;
      color: var(--colors-ink-10, #19153E);
      text-align: center;
      text-decoration: none;
      font-feature-settings: 'liga' off, 'clig' off;
      text-overflow: ellipsis;
      font-family: "Aspekta";
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: 18px; /* 150% */
      display: flex;
      height: 20px;
      padding: 3px 10px;
      align-items: center;
      border-radius: 7px;
    
      &.is-active {
        background: var(--colors-indigo-40);
        color: var(--colors-teal-95);
      }
    }
  }

  .beta-cta {
    display: flex;
    padding: 0 8px;
    justify-content: center;
    align-items: center;
    border-radius: 9px;
    border: 1px solid var(--colors-indigo-40);
    background: var(--colors-teal-95);
    overflow: hidden;
    color: var(--colors-indigo-40);
    text-align: center;
    font-feature-settings: 'liga' off, 'clig' off;
    text-overflow: ellipsis;
    text-decoration: none;
    font-size: 12px;
    font-style: normal;
    font-weight: 600;
    line-height: 18px; /* 150% */
  }

</style>
